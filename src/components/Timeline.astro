---

import "../styles/timeline.css"

let { events } = Astro.props;

// Generate a full date for each event
events.map((event) => {

    let padWithLeadingZeros = function(num, totalLength) {
        return String(num).padStart(totalLength, '0');
    }

    event.date.full = '';
    event.date.full = event.date.year ? event.date.full += `${event.date.year}` : event.date.full;
    event.date.full = event.date.year && event.date.month ? event.date.full += `-${padWithLeadingZeros(event.date.month, 2)}` : event.date.full;
    event.date.full = event.date.year && event.date.month && event.date.day ? event.date.full += `-${padWithLeadingZeros(event.date.day, 2)}` : event.date.full;
    event.date.full = event.date.year && event.date.yearNotation ? event.date.full += ` ${event.date.yearNotation}` : event.date.full;
});

// Sort the events array by date
events.sort((a, b) => a.date.day - b.date.day);
events.sort((a, b) => a.date.month - b.date.month);
events.sort((a, b) => a.date.year - b.date.year);

console.log(events);

---

<div class="viewport">
    <ul>
        {events.map((event) => {
            if (event.description){
                return  (
                    <li>
                        <p class="date">{event.date.full}</p>   
                        <div>
                            <p class="title">{event.title}</p>
                            <p class="description">{event.description}</p>                            
                        </div>
                    </li>
                )
            } else {
                return  (
                    <li>
                        <p class="date">{event.date.full}</p>   
                        <div>
                            <p class="title">{event.title}</p>                        
                        </div>
                    </li>
                )
            }
        })}
        <li>
            <div>
                <p class="title">Title of the Event</p>
                <p class="description">This is exactly 120 characters: Sed adipiscing diam donec adipiscing tristique risus nec feugiat in fermentum posuereou.</p>
            </div>
            <p class="date">200 FC</p>
        </li>
        <li>
            <div>
                <p class="title">Title of the Event</p>
                <p class="description">This is exactly 120 characters: Sed adipiscing diam donec adipiscing tristique risus nec feugiat in fermentum posuereou.</p>
            </div>
            <p class="date">300 FC</p>
        </li>
        
    </ul>
</div>
